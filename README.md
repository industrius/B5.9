B5.9 Задание на декораторы


Декораторы. Тайминг

В программировании есть правило: "Преждевременная оптимизация — корень всех (или большинства) проблем в программировании". Его приписывают попеременно Дональду Кнуту и/или Тони Хоару — великим ученым Computer Science. Полная цитата звучит примерно следующим образом: "Нам не стоит беспокоиться о маленьких выигрышах в производительности: в 97% случаев такая преждевременная оптимизация это корень всех зол. Тем не менее, не стоит игнорировать оставшиеся 3%".

Когда программа работает медленно, нужно найти кусок кода, где возникает проблема, и понять, можно ли исправить ситуацию. Чтобы доказать, что программа работает неэффективно, можно использовать разные средства. Обычно делают оценки потребления кодом памяти и скорости работы кода. Зачастую за счет увеличения объема потребляемой памяти можно ускорить выполнение. Мы чуть позже в этом модуле сможем сделать это своими руками. Отметим, что во многом скорость работы определяется фундаментальными особенностями используемых алгоритмов.

Примечания:

в данном случае внутри вложенной функции (где-то в декораторе) стоит выводить среднее время выполнения;
можно либо зафиксировать число запусков, либо передавать как параметр.
Опционально: вы можете выполнить несколько дополнительных требований и получить за них баллы:

задание с одной звездочкой: написать декоратор в качестве объекта класса-секундомера;
задание с двумя звездочками: написать декоратор в качестве объекта класса-секундомера, который можно использовать как контекстный менеджер.
Кстати, вот наблюдение. В юните B5.7 была задачка на последовательность Фибоначчи. Если увеличить верхнюю границу последовательности, то функцию, написанную в той задачке, можно прогнать для отладки поведения секундомера.
